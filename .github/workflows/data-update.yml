name: Data Update
on: workflow_dispatch
jobs:
  get_rss: 
    runs-on: ubuntu-latest
    name: Get GMC Posts
    steps: 
      - name: Checkout
        uses: actions/checkout@v4.1.1  
        with:
          submodules: 'true'
      - name: RSS Parser
        uses: chrisreddington/rss-parser@v0.0.6
        with:
          feed_url: https://dao.rocketpool.net/c/grant-bounties/13.rss
          script_output: json
          last_parsed_file: .github/workflows/last-parsed.json
          github_token: ${{ secrets.PAT }}
      - name: Copy Result
        shell: bash
        run: mv .github/workflows/last-parsed.json _data/gmc-rss.json
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v5
        with: 
          commit-message: Update data
          committer: GitHub <noreply@github.com>
          token: ${{ secrets.PAT }}
          branch: temp-data-updates
          delete-branch: true
          title: 'Update Data'
